<ion-header>
  <ion-toolbar>

    <!-- Back Button -->
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs/role-select"></ion-back-button>
    </ion-buttons>

    <ion-title>Practice Session</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-spinner *ngIf="loading"></ion-spinner>

  <div *ngIf="!loading && currentQuestion">

    <p>
      Question {{ currentIndex + 1 }} of {{ questions.length }}
    </p>

    <p><strong>Topic:</strong> {{ currentQuestion.topic }}</p>

    <h3>{{ currentQuestion.question }}</h3>

    <!-- TEXT MODE -->
    <div *ngIf="currentQuestion.mode === 'text'">
      <ion-textarea
        [(ngModel)]="currentQuestion.userAnswer"
        placeholder="Type your answer..."
        rows="6">
      </ion-textarea>
    </div>

    <!-- MCQ MODE -->
    <div *ngIf="currentQuestion.mode === 'mcq'">
      <ion-radio-group [(ngModel)]="currentQuestion.userIndex">
        <ion-item *ngFor="let opt of currentQuestion.options; let i = index">
          <ion-label>{{ opt }}</ion-label>
          <ion-radio slot="start" [value]="i"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </div>

    <!-- NAV BUTTONS -->
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-button expand="block" (click)="prev()" [disabled]="currentIndex === 0">
            Previous
          </ion-button>
        </ion-col>

        <ion-col>
          <ion-button expand="block" (click)="next()"
            [disabled]="currentIndex === questions.length - 1">
            Next
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-button expand="block" color="medium" (click)="addNewQuestion()">
      + Add Another Question
    </ion-button>

    <ion-button expand="block" color="success" (click)="submitAll()"
      [disabled]="questions.length === 0">
      Submit All
    </ion-button>

  </div>

</ion-content>
